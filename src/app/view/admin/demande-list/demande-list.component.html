<div class="p-grid">
    <div class="p-col-12">

        <p-toast></p-toast>

        <div class="card">

            <div class="card-header mb-5"><h1>Traitement</h1></div>
            <div class="card-body">
            <div class="p-grid p-fluid">

                <div class="p-fluid p-formgrid p-grid">

                    <div class="p-field p-col">
                        <label for="firstname1">Ice de societe :</label>
                        <input id="firstname1" type="text" [(ngModel)]="demandeVo.societe" pInputText>
                    </div>
                    <div class="p-field p-col">
                        <label for="firstname1">Operation</label>
                        <input id="firstname1" type="text" [(ngModel)]="demandeVo.operation" pInputText>
                    </div>
                    <div class="p-field p-col">
                        <label for="firstname1">Annee</label>
                        <input id="firstname1" type="text" [(ngModel)]="demandeVo.annee" pInputText>
                    </div>
                    <div class="p-field p-col">
                        <label for="lastname1">premiere mois :</label>
                        <input id="lastname1" type="text" [(ngModel)]="demandeVo.moisMin" pInputText>
                    </div>
                    <div class="p-field p-col">
                        <label for="lastname1">deuxieme mois :</label>
                        <input id="lastname1" type="text" [(ngModel)]="demandeVo.moisMax" pInputText>
                    </div>
                </div>
            </div>
            </div>

            <div class="card-footer p-d-flex p-jc-center">
                <p-button (onClick)="searchCriteria()" label="Search" icon="pi pi-search" ></p-button>
            </div>
        </div>
      <!--  <div style="margin: 15px">
            <button pButton pRipple type="button" label="Search" icon="pi pi-search" iconPos="right"
                    style="width:20rem; height: 10px" class="p-col-6 p-mb-2 p-offset-5"
                    (click)="searchCriteria()"></button> <button pButton pRipple type="button" label="Search" icon="pi pi-search" iconPos="right"
                                                                 style="width:20rem; height: 10px" class="p-col-6 p-mb-2 p-offset-5"
                                                                 (click)="searchCriteria()"></button>
        </div>-->

        <div class="card">
            <h3>Liste des demandes</h3>
            <p-table #dt [value]="items" [rows]="10" [paginator]="true" [rowHover]="true"
                     styleClass="p-datatable-customers"
                     currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                     [showCurrentPageReport]="true" dataKey="id">
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="reference">Reference
                            <p-sortIcon field="reference"></p-sortIcon>
                        </th>
                        <th pSortableColumn="annee">Date de demande
                            <p-sortIcon field="annee"></p-sortIcon>
                        </th>
                        <th pSortableColumn="societe" style="width: 10rem">Société
                            <p-sortIcon field="societe"></p-sortIcon>
                        </th>
                        <th pSortableColumn="totalHTDiff">Opération
                            <p-sortIcon field="totalHTDiff"></p-sortIcon>
                        </th>
                        <th pSortableColumn="totalHTDiff" style="width: 10rem">Année
                            <p-sortIcon field="totalHTDiff"></p-sortIcon>
                        </th>
                        <th pSortableColumn="totalHTDiff" style="width: 8rem">Mois
                            <p-sortIcon field="totalHTDiff"></p-sortIcon>
                        </th>
                        <th pSortableColumn="totalHTDiff" style="width: 9rem">Trim
                            <p-sortIcon field="totalHTDiff"></p-sortIcon>
                        </th>
                        <th pSortableColumn="montantISCalcule">Comptable traiteur
                            <p-sortIcon field="montantISCalcule"></p-sortIcon>
                        </th>
                        <th pSortableColumn="montantISCalcule" style="width: 15rem">Comptable validateur
                            <p-sortIcon field="montantISCalcule"></p-sortIcon>
                        </th>
                        <th></th>
                    </tr>
                </ng-template>

                <ng-template pTemplate="body" let-demande let-expanded="expanded">
                    <tr>
                        <td>{{demande.ref}}</td>
                        <td>{{demande.dateDemande}}</td>
                        <td>{{demande.societe.ice}}</td>
                        <td>{{demande.operation}}</td>
                        <td>{{demande.annee}}</td>
                        <td>{{demande.mois}}</td>
                        <td>{{demande.trimestre}}</td>
                        <td>{{demande.comptableTraiteur.nom}}</td>
                        <td>{{demande.comptableValidateur.nom}}</td>
                        <td>
                            <button pButton pRipple label="Traiter" icon="pi pi-pencil" class="p-button-success p-mr-2"
                                    (click)="navigateToCreate(demande)"></button>
                        </td>
                    </tr>
                </ng-template>

            </p-table>
            <ng-template pTemplate="summary">
                <div class="p-d-flex p-ai-center p-jc-between">
                    In total there are {{items ? items.length : 0 }} declarations IS.
                </div>
            </ng-template>
        </div>


    </div>
</div>
